#!/usr/bin/env python3

if __name__ == '__main__':
    try:
        from autotest import main
    except ImportError:
        # Not installed
        import pathlib
        mypath = pathlib.Path(__file__).parent.resolve()
        import sys
        sys.path.append(str(mypath.parent))
        from autotest import main
    # trace cannot be in Runner or Report because that would not trace the imports.
    # Preliminary tray out.
    # TODO
    # 1. test
    # 2. turn on/off
    # 3. report coverage only for given test modules
    # 4. figure out where to put this
    # NB: sys.base_prefix is hard path while sys.prefix can be virtualized
    #import trace
    #t = trace.Trace(count=1, trace=0, ignoredirs=[sys.base_prefix, sys.base_exec_prefix, sys.prefix, sys.exec_prefix])
    #t.runfunc(main)
    main()
    #t.results().write_results(summary=True)
    exit(0)
